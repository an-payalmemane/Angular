<div class="container">
    <form [formGroup]="form">
        <div class="form-field">
            <div class="input-field">
                <label>Company Name:</label>
                <input formControlName="companyName" placeholder="Enter company name" style="width: 30%;">
                @if (form.get('companyName')?.invalid && form.get('companyName')?.touched){
                <h6>Company name is required.</h6>
                }

                <label>Country:</label>
                <input formControlName="country" placeholder="Enter country" style="width: 30%;">
                @if (form.get('country')?.invalid && form.get('country')?.touched){
                <h6>
                    Country is required.
                </h6>
                }
            </div>

            <div class="input-field">
                <label>Street:</label>
                <input formControlName="street" placeholder="Enter street" size="30">
                @if (form.get('street')?.invalid && form.get('street')?.touched) {
                <h6>Street is required.</h6>
                }

                    <label>City:</label>
                    <input formControlName="city" placeholder="Enter city" size="30">
                    @if (form.get('city')?.invalid && form.get('city')?.touched) {
                        <h6>City is required.</h6>
                    }

                    <label>Pincode:</label>
                    <input formControlName="pincode" placeholder="Enter pincode" size="30">
                    @if (form.get('pincode')?.invalid && form.get('pincode')?.touched){
                       <h6> Pincode is required and must be 6 digits.</h6>
                    }
            </div>
        </div>

        <div class="form-field">
            <div formArrayName="units">
                @for (unit of units.controls; track unit; let i = $index) {
                <div  [formGroupName]="i">
                    <label>Unit Name:</label>
                    <input formControlName="unitName" placeholder="Enter unit name">

                    <label>Quantity:</label>
                    <input formControlName="quantity" placeholder="Enter quantity" type="number">

                    <label>Unit Price:</label>
                    <input formControlName="unitPrice" placeholder="Enter unit price" type="number">

                    <label>Total Price:</label>
                    <input formControlName="totalPrice" placeholder="Total price" type="number">

                    <button type="button" (click)="removeUnit(i)">Remove Unit</button>

                    @if (unit.get('unitName')?.invalid && unit.get('unitName')?.touched){
                       <h6> Unit name is required.</h6>
                    }
                    @if (unit.get('quantity')?.invalid && unit.get('quantity')?.touched){
                       <h6> Quantity is required and must be at least 1.</h6>
                    }
                    @if (unit.get('unitPrice')?.invalid && unit.get('unitPrice')?.touched){
                        <h6> Unit price is required and must be at least 0.</h6>
                    }
                </div>
            }
                <button type="button" (click)="addUnit()">Add Unit</button>
            </div>
        </div>

        <button type="submit" (click)="onSubmit()">Submit</button>


    </form>
</div>